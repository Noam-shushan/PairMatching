<Window x:Class="Gui.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Gui"
        mc:Ignorable="d"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="Auto"
        WindowState="Maximized"
        Background="{DynamicResource MaterialDesignPaper}"
        FontFamily="{DynamicResource MaterialDesignFont}"
        FontSize="15"
        Loaded="Window_Loaded"
        Title="שלהבת" Height="800" Width="1200">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="20"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="20"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="20"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="20"/>
        </Grid.RowDefinitions>
        <CheckBox Visibility="Hidden" x:Name="cbUpdateForEnable" IsChecked="True"/>
        <StackPanel Grid.Column="4" Grid.Row="1" Margin="10,20,0,0" Grid.RowSpan="2">
            <Button 
                x:Name="updateBtn"
                Margin="0,0,0,20"
                Content="עדכן נתונים"
                Click="updateBtn_Click"               
            />
            <Button 
                x:Name="allStudentBtn"
                Content="הצג את כל התלמידים"
                Click="allStudentBtn_Click"
                IsEnabled="{Binding ElementName=cbUpdateForEnable, Path=IsChecked}"
                Margin="0,0,0,20"
            />
            <Button
                x:Name="allPairsBtn"
                Content="הצג את כל החברותות"
                Click="allPairsBtn_Click"
                IsEnabled="{Binding ElementName=cbUpdateForEnable, Path=IsChecked}"
                Margin="0,0,0,20"
            />
            <Button 
                x:Name="allStudentWithoutPairBtn"
                Content="הצג תלמידים ללא חברותא"
                Click="allStudentWithoutPairBtn_Click"
                IsEnabled="{Binding ElementName=cbUpdateForEnable, Path=IsChecked}"
                Margin="0,0,0,20"
            />
            <Button 
                x:Name="allStudentFromWorldBtn"
                Content="הצג תלמידים מהעולם"
                Click="allStudentFromWorldBtn_Click"
                IsEnabled="{Binding ElementName=cbUpdateForEnable, Path=IsChecked}"
                Margin="0,0,0,20"
            />
            <Button 
                x:Name="allStudentFromIsraelBtn"
                Content="הצג תלמידים מישראל"
                Click="allStudentFromIsraelBtn_Click"
                IsEnabled="{Binding ElementName=cbUpdateForEnable, Path=IsChecked}"
                Margin="0,0,0,20"
            />
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Button
                    x:Name="searchBtn"
                    Click="searchBtn_Click"
                    Style="{DynamicResource MaterialDesignToolButton}">
                            <materialDesign:PackIcon
                    Kind="Search"
                    IsEnabled="{Binding ElementName=cbUpdateForEnable, Path=IsChecked}"
                    Opacity=".56" />
                </Button>
                <TextBox
                    Grid.Column="1"
                    Margin="8 0 0 0"
                    x:Name="tbSearch"
                    FlowDirection="RightToLeft"
                    materialDesign:HintAssist.Hint="חיפוש"
                    materialDesign:TextFieldAssist.DecorationVisibility="Hidden"
                    MinWidth="200"
                    BorderBrush="#28a7e7"
                    KeyDown="tbSearch_KeyDown"
                    IsEnabled="{Binding ElementName=cbUpdateForEnable, Path=IsChecked}"
                    VerticalAlignment="Center"/>
                <TextBlock x:Name="tbIsThereResultOfSearcing" Grid.Row="1" Grid.Column="1"/>
            </Grid>
            <StackPanel x:Name="spBtnForMatch" Visibility="Collapsed" Margin="0,50,0,0">
                <Button 
                x:Name="matchBtn"
                Margin="0,10,0,10"
                Content="בצע התאמה מההצעות"
                Background="#88d6c6"
                Click="matchBtn_Click"/>
                <Button 
                x:Name="manualMatchBtn"
                Content="בצע התאמה ידנית"
                Background="#88d6c6"
                Click="manualMatchBtn_Click"/>
            </StackPanel>
        </StackPanel>

        <Grid x:Name="allStudentGrig" 
              Visibility="Collapsed" Grid.Column="3" Grid.Row="1" Grid.RowSpan="2">
            <ListView 
                x:Name="lvStudents"
                Height="800"
                ItemsSource="{Binding}"
                SelectionChanged="lvStudents_SelectionChanged">
                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem" BasedOn="{StaticResource MaterialDesignGridViewItem}">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Path=IsMatch}" Value="True">
                                <Setter Property="Background" Value="#bee1cf"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </ListView.ItemContainerStyle>
                <ListView.View>
                    <GridView>
                        <GridView.Columns>
                            <GridViewColumn Header="תלמידים" 
                                            DisplayMemberBinding="{Binding Path=Name}"/>
                            <GridViewColumn>
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding Path=IsSelected, Mode=TwoWay}"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                        </GridView.Columns>
                    </GridView>
                </ListView.View>
            </ListView>
        </Grid>
        <Grid x:Name="allPairsGrig" 
              Visibility="Collapsed" Grid.Column="3" Grid.Row="1" Grid.RowSpan="2">
            <StackPanel>
                <ListView 
                x:Name="lvPairs"
                FlowDirection="RightToLeft"
                Height="500"
                MouseDoubleClick="lvPairs_MouseDoubleClick"
                ItemsSource="{Binding}">
                    <ListView.Resources>
                        <Style TargetType="ListViewItem">
                            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                        </Style>
                        <local:OrdinalConverter x:Key="OrdinalConverter" />
                        <DataTemplate x:Key="OrdinalColumnDataTemplate">
                            <TextBlock Text="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ListViewItem},
                    Converter={StaticResource ResourceKey=OrdinalConverter}}" HorizontalAlignment="Right" />
                        </DataTemplate>
                    </ListView.Resources>
                    <ListView.View>
                        <GridView>
                            <GridView.Columns>
                                <GridViewColumn 
                                    Header="#" 
                                    CellTemplate="{StaticResource ResourceKey=OrdinalColumnDataTemplate}" 
                                    Width="30"/>
                                <GridViewColumn>
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <CheckBox IsChecked="{Binding Path=IsSelected, Mode=TwoWay}"/>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                <GridViewColumn Header="חברותא א" Width="260">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="5">
                                                    <TextBlock Text="שם:  " FontWeight="Bold" TextDecorations="Underline"/>
                                                    <TextBlock Text="{Binding Path=FirstStudent.Name}"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="5">
                                                    <TextBlock Text="מייל:  " FontWeight="Bold" TextDecorations="Underline"/>
                                                    <TextBlock Text="{Binding Path=FirstStudent.Email}"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="5">
                                                    <TextBlock Text="טלפון:  " FontWeight="Bold" TextDecorations="Underline"/>
                                                    <TextBlock Text="{Binding Path=FirstStudent.PhoneNumber}"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                <GridViewColumn Header="חברותא ב" Width="260">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="5">
                                                    <TextBlock Text="שם:  " FontWeight="Bold" TextDecorations="Underline"/>
                                                    <TextBlock Text="{Binding Path=SecondStudent.Name}"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="5">
                                                    <TextBlock Text="מייל:  " FontWeight="Bold" TextDecorations="Underline"/>
                                                    <TextBlock Text="{Binding Path=SecondStudent.Email}"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="5">
                                                    <TextBlock Text="טלפון:  " FontWeight="Bold" TextDecorations="Underline"/>
                                                    <TextBlock Text="{Binding Path=SecondStudent.PhoneNumber}"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                <GridViewColumn Header="מסלול לימוד"
                                                DisplayMemberBinding="{Binding Path=PrefferdTracksShow}"/>
                            </GridView.Columns>
                        </GridView>
                    </ListView.View>
                </ListView>
                <Button 
                    x:Name="removePairBtn"
                    Width="150"
                    Margin="10"
                    Content="מחק חברותא"
                    Click="removePairBtn_Click"/>
            </StackPanel>
        </Grid>
        <StackPanel Visibility="Collapsed" FlowDirection="RightToLeft" x:Name="spStudent" Grid.Column="2" Grid.Row="1" Grid.RowSpan="2">
            <StackPanel Orientation="Horizontal" Margin="5">
                <TextBlock Text="שם:  " FontWeight="Bold" TextDecorations="Underline"/>
                <TextBlock Text="{Binding Path=Name}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="5">
                <TextBlock Text="טלפון:  " FontWeight="Bold" TextDecorations="Underline"/>
                <TextBlock Text="{Binding Path=PhoneNumber}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="5">
                <TextBlock Text="אימייל:  " FontWeight="Bold" TextDecorations="Underline"/>
                <TextBox Text="{Binding Path=Email}" IsReadOnly="True"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="5">
                <TextBlock Text="ארץ: " FontWeight="Bold" TextDecorations="Underline"/>
                <TextBlock Text="{Binding Path=Country}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="5">
                <TextBlock Text="תחום לימוד מועדף:  " FontWeight="Bold" TextDecorations="Underline"/>
                <TextBlock Text="{Binding Path=PrefferdTracksShow}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="5">
                <TextBlock Text="מגדר:  " FontWeight="Bold" TextDecorations="Underline"/>
                <TextBlock Text="{Binding Path=GenderShow}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="5">
                <TextBlock Text="מגדר מועדף:  " FontWeight="Bold" TextDecorations="Underline"/>
                <TextBlock Text="{Binding Path=PrefferdGenderShow}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="5">
                <TextBlock Text="רמת אנגלית:  " FontWeight="Bold" TextDecorations="Underline"/>
                <TextBlock Text="{Binding Path=EnglishLevelShow}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="5">
                <TextBlock Text="רמת אנגלית רצויה:  " FontWeight="Bold" TextDecorations="Underline"/>
                <TextBlock Text="{Binding Path=DesiredEnglishLevelShow}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="5">
                <TextBlock Text="רמת לימוד:  " FontWeight="Bold" TextDecorations="Underline"/>
                <TextBlock Text="{Binding Path=SkillLevelShow}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="5">
                <TextBlock Text="רמת לימוד רצויה:  " FontWeight="Bold" TextDecorations="Underline"/>
                <TextBlock Text="{Binding Path=DesiredSkillLevelShow}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="5">
                <TextBlock Text="סגנון לימוד:  " FontWeight="Bold" TextDecorations="Underline"/>
                <TextBlock Text="{Binding Path=LearningStyleShow}"/>
            </StackPanel>
            <StackPanel>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Button
                        x:Name="compFirstMatchBtn"
                        Style="{StaticResource MaterialDesignFlatButton}"
                        HorizontalAlignment="Left"
                        Content="השווה"
                        Click="compFirstMatchBtn_Click"/>
                    <Button
                        x:Name="clearCBFirstMatchBtn"
                        Content="Clear"
                        Style="{StaticResource MaterialDesignFlatButton}"
                        HorizontalAlignment="Right"
                        Grid.Column="1" 
                        Click="clearCBFirstMatchBtn_Click"/>
                </Grid>
                <ComboBox
                    x:Name="cbFirstMatching"
                    Style="{StaticResource MaterialDesignFilledComboBox}"
                    materialDesign:HintAssist.Hint="התאמה ראשונה"
                    ItemsSource="{Binding Path=FirstSuggestStudents}"
                    Margin="0,0,0,5"                    
                    Width="256">
                </ComboBox>
            </StackPanel>
            <StackPanel>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Button
                        x:Name="compSecondeMatchBtn"
                        Style="{StaticResource MaterialDesignFlatButton}"
                        HorizontalAlignment="Left"
                        Content="השווה"
                        Click="compSecondeMatchBtn_Click"/>
                    <Button
                        x:Name="clearCBSecondeMatchBtn"
                        Content="Clear"
                        Style="{StaticResource MaterialDesignFlatButton}"
                        HorizontalAlignment="Right"
                        Grid.Column="1" 
                        Click="clearCBSecondeMatchBtn_Click"/>
                </Grid>
                <ComboBox
                    x:Name="cbSecondeMatching"
                    Style="{StaticResource MaterialDesignFilledComboBox}"
                    materialDesign:HintAssist.Hint="התאמה שנייה"
                    ItemsSource="{Binding Path=SecondeSuggestStudents}"
                    Margin="0,0,0,5"
                    Width="256">
                </ComboBox>
            </StackPanel>
        </StackPanel>
        <ListBox Visibility="Collapsed" VerticalAlignment="Top" x:Name="lbOpenQuestions" Width="490" Height="700" Grid.Column="1" Grid.Row="1" Grid.RowSpan="2" FlowDirection="RightToLeft">
            <Border
                Background="{DynamicResource MaterialDesignBackground}">
                <GroupBox
                        Header="זמני לימוד אפשריים"
                        Style="{DynamicResource MaterialDesignGroupBox}"
                        Margin="5,0,0,5"
                        Width="480"
                        Height="auto"
                        UseLayoutRounding="True" RenderTransformOrigin="0.5,0.5">
                    <TextBlock Text="{Binding DesiredLearningTimeShow}"/>
                </GroupBox>
            </Border>
            <Border
                Background="{DynamicResource MaterialDesignBackground}">
                <GroupBox
                        Header="פרטים ביוגרפיים"
                        Style="{DynamicResource MaterialDesignGroupBox}"
                        Margin="5,0,0,5"
                        Width="480"
                        Height="auto"
                        UseLayoutRounding="True" RenderTransformOrigin="0.5,0.5">
                    <TextBlock Text="{Binding OpenQuestions[Personal information]}"/>
                </GroupBox>
            </Border>
            <Border
                Background="{DynamicResource MaterialDesignBackground}">
                <GroupBox
                    Header="תכונות אישיות, ערכים חשובים בשבילך, תחביבים"
                    Style="{DynamicResource MaterialDesignGroupBox}"
                    Margin="5,0,0,5"
                    Width="480"
                    Height="auto"
                    UseLayoutRounding="True">
                    <TextBlock Text="{Binding OpenQuestions[Personality trates]}"/>
                </GroupBox>
            </Border>
            <Border
                Background="{DynamicResource MaterialDesignBackground}">
                <GroupBox
                    Header="מה מעניין אותך בהצטרפות לשלהבת?"
                    Style="{DynamicResource MaterialDesignGroupBox}"
                    Margin="5,0,0,5"
                    Width="480"
                    Height="auto"
                    UseLayoutRounding="True">
                    <TextBlock Text="{Binding OpenQuestions[What are your hopes and expectations from this program]}"/>
                </GroupBox>
            </Border>
            <Border
                Background="{DynamicResource MaterialDesignBackground}">
                <GroupBox
                    Header="דברים נוספים שהיית רוצה שנדע?"
                    Style="{DynamicResource MaterialDesignGroupBox}"
                    Margin="5,0,0,5"
                    Width="480"
                    Height="auto"
                    UseLayoutRounding="True">
                    <TextBlock Text="{Binding OpenQuestions[Additional information]}"/>
                </GroupBox>
            </Border>
            <Border
                Background="{DynamicResource MaterialDesignBackground}">
                <GroupBox
                    Header="דרך מי (או דרך מה) הגעת לתכנית?"
                    Style="{DynamicResource MaterialDesignGroupBox}"
                    Margin="5,0,0,5"
                    Width="480"
                    Height="auto"
                    UseLayoutRounding="True">
                    <TextBlock Text="{Binding OpenQuestions[Who introduced you to this program]}"/>
                </GroupBox>
            </Border>
            <Border
                Background="{DynamicResource MaterialDesignBackground}">
                <GroupBox
                    Header="Country and City of residence"
                    Style="{DynamicResource MaterialDesignGroupBox}"
                    Margin="5,0,0,5"
                    Width="480"
                    Height="auto"
                    UseLayoutRounding="True">
                    <TextBlock Text="{Binding OpenQuestions[Country and City of residence]}"/>
                </GroupBox>
            </Border>
        </ListBox>
        <ProgressBar
            x:Name="pbUpdate"
            Width="500"
            Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="2"
            IsIndeterminate="True" 
            Visibility="Collapsed"/>
    </Grid>
</Window>
